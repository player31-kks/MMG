<Window x:Class="MMG.Views.Common.TestResultDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="테스트 결과"
        Width="450"
        Height="380"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False">

    <Window.Resources>
        <SolidColorBrush x:Key="SuccessColor"
                Color="#10B981"/>
        <SolidColorBrush x:Key="FailColor"
                Color="#EF4444"/>
        <SolidColorBrush x:Key="SuccessLightBg"
                Color="#ECFDF5"/>
        <SolidColorBrush x:Key="FailLightBg"
                Color="#FEF2F2"/>
    </Window.Resources>

    <Border Background="White"
            CornerRadius="16"
            BorderBrush="#E5E7EB"
            BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="24"
                              ShadowDepth="4"
                              Opacity="0.15"
                              Color="#000000"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0"
                    x:Name="HeaderBorder"
                    CornerRadius="16,16,0,0"
                    MouseLeftButtonDown="Header_MouseLeftButtonDown">
                <Grid Margin="24,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Result Icon -->
                    <Border Grid.Column="0"
                            x:Name="IconBorder"
                            Width="56"
                            Height="56"
                            CornerRadius="28"
                            Margin="0,0,16,0">
                        <TextBlock x:Name="IconText"
                                   FontSize="28"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"/>
                    </Border>

                    <!-- Title & Subtitle -->
                    <StackPanel Grid.Column="1"
                            VerticalAlignment="Center">
                        <TextBlock x:Name="TitleText"
                                   Text="테스트 완료"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   Foreground="#111827"/>
                        <TextBlock x:Name="SubtitleText"
                                   Text="모든 스텝이 성공적으로 실행되었습니다"
                                   FontSize="13"
                                   Foreground="#6B7280"
                                   Margin="0,4,0,0"/>
                    </StackPanel>

                    <!-- Close Button -->
                    <Button Grid.Column="2"
                            Content="✕"
                            Width="32"
                            Height="32"
                            FontSize="14"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="#9CA3AF"
                            VerticalAlignment="Top"
                            Cursor="Hand"
                            Click="Close_Click">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="border"
                                                    Background="{TemplateBinding Background}"
                                                    CornerRadius="8">
                                                <ContentPresenter HorizontalAlignment="Center"
                                                                  VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver"
                                                        Value="True">
                                                    <Setter TargetName="border"
                                                            Property="Background"
                                                            Value="#F3F4F6"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Border>

            <!-- Stats Cards -->
            <Grid Grid.Row="1"
                    Margin="24,8,24,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="12"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Total Steps Card -->
                <Border Grid.Column="0"
                        Grid.Row="0"
                        Background="#F9FAFB"
                        CornerRadius="12"
                        Padding="16">
                    <StackPanel>
                        <TextBlock Text="전체 스텝"
                                   FontSize="12"
                                   Foreground="#6B7280"/>
                        <TextBlock x:Name="TotalStepsText"
                                   Text="0"
                                   FontSize="28"
                                   FontWeight="Bold"
                                   Foreground="#111827"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Success Card -->
                <Border Grid.Column="2"
                        Grid.Row="0"
                        Background="#ECFDF5"
                        CornerRadius="12"
                        Padding="16">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="✓ "
                                       FontSize="12"
                                       Foreground="#10B981"
                                       FontWeight="Bold"/>
                            <TextBlock Text="성공"
                                       FontSize="12"
                                       Foreground="#059669"/>
                        </StackPanel>
                        <TextBlock x:Name="SuccessStepsText"
                                   Text="0"
                                   FontSize="28"
                                   FontWeight="Bold"
                                   Foreground="#059669"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Failed Card -->
                <Border Grid.Column="0"
                        Grid.Row="2"
                        Background="#FEF2F2"
                        CornerRadius="12"
                        Padding="16">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="✕ "
                                       FontSize="12"
                                       Foreground="#EF4444"
                                       FontWeight="Bold"/>
                            <TextBlock Text="실패"
                                       FontSize="12"
                                       Foreground="#DC2626"/>
                        </StackPanel>
                        <TextBlock x:Name="FailedStepsText"
                                   Text="0"
                                   FontSize="28"
                                   FontWeight="Bold"
                                   Foreground="#DC2626"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Execution Time Card -->
                <Border Grid.Column="2"
                        Grid.Row="2"
                        Background="#F0F9FF"
                        CornerRadius="12"
                        Padding="16">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="⏱ "
                                       FontSize="12"
                                       Foreground="#3B82F6"/>
                            <TextBlock Text="실행 시간"
                                       FontSize="12"
                                       Foreground="#2563EB"/>
                        </StackPanel>
                        <TextBlock x:Name="ExecutionTimeText"
                                   Text="0.0초"
                                   FontSize="28"
                                   FontWeight="Bold"
                                   Foreground="#2563EB"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Footer Button -->
            <Border Grid.Row="2"
                    Background="#F9FAFB"
                    CornerRadius="0,0,16,16"
                    Padding="24,16">
                <Button Content="확인"
                        Width="120"
                        Height="40"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Cursor="Hand"
                        HorizontalAlignment="Center"
                        Click="OK_Click"
                        IsDefault="True">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="border"
                                                Background="#3B82F6"
                                                CornerRadius="10"
                                                Padding="24,0">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver"
                                                    Value="True">
                                                <Setter TargetName="border"
                                                        Property="Background"
                                                        Value="#2563EB"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed"
                                                    Value="True">
                                                <Setter TargetName="border"
                                                        Property="Background"
                                                        Value="#1D4ED8"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Foreground"
                                    Value="White"/>
                        </Style>
                    </Button.Style>
                </Button>
            </Border>
        </Grid>
    </Border>
</Window>
